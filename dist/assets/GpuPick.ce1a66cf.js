import{r as x,C as P,S,W as A,A as B,D,P as E,O as M,B as R,d as C,c as u,a as F,M as G,b as O,aI as j,j as g,Z as L}from"./index.efc1f02a.js";import{i as T}from"./isMesh.6a639cba.js";const z=()=>(x.exports.useEffect(()=>{const f=new P,n=new S,t=new A({alpha:!0,antialias:!0,canvas:document.getElementById("canvas")}),l=document.getElementById("canvas-view");t.setSize(l.clientWidth,l.clientHeight);const p=new B("#DFDFDF",.4);n.add(p);const s=new D(16777215,1);s.position.set(50,50,-50),s.castShadow=!0,s.shadow.mapSize.width=1024,s.shadow.mapSize.height=1024,s.shadow.camera.near=1,s.shadow.camera.far=100,n.add(s);const i=new E(75,window.innerWidth/window.innerHeight,.1,1e3);i.position.set(0,50,50),new M(i,t.domElement),w(0,5,0,101),w(30,5,-10,202),b();const m=function(){requestAnimationFrame(m),t.setRenderTarget(null),t.render(n,i)};function w(r,e,a,o){const v=new R(10,10,10),y=new C({color:f.setHex(o)}),d=new u(v,y);d.name="cube"+o,d.position.set(r,e,a),d.castShadow=!0,n.add(d)}function b(){const r=new F(200,200,2),e=new G({color:"#C7DAFF",side:O}),a=new u(r,e);a.rotateX(-Math.PI/2),a.receiveShadow=!0,n.add(a)}m();const c=new L,h=new j(1,1);t.domElement.addEventListener("mousedown",r=>{c.x=r.clientX,c.y=r.clientY,i.setViewOffset(t.domElement.width,t.domElement.height,c.x*window.devicePixelRatio|0,c.y*window.devicePixelRatio|0,1,1),t.setRenderTarget(h),t.render(n,i),i.clearViewOffset();const e=new Uint8Array(4);t.readRenderTargetPixels(h,0,0,1,1,e),console.log(e);const a=e[0]<<16|e[1]<<8|e[2];if(console.log(e[0]<<16),console.log(e[1]<<8),a>0&&n.getObjectByName("cube"+a)){const o=n.getObjectByName("cube"+a);o&&T(o)&&!Array.isArray(o.material)&&(o.material.color.set("#ff0000"),o.material.needsUpdate=!0)}})},[]),g("div",{id:"canvas-view",className:"w-full h-full",children:g("canvas",{id:"canvas"})}));export{z as default};
